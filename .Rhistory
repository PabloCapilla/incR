incRdataExample2 <- incRdataExample2[incRdataExample2$date=="2015-05-06",]
plot (incRdataExample2$valueT)
incRdataExample2 <- env.tem (data.env=env.data, incubation.data=incRdataExample2,
date.format= "%d/%m/%Y %H:%M", timezone= "GMT")
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=3,
sensitivity=0.15,
maxNightVar_accepted=2,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1)
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
source ("../Preparing examples/env.temp.r")
incRdataExample2 <- read.csv("../Preparing examples/G16iButton.0605.cameracali.csv")
plot (incRdataExample2$valueT)
env.data <- read.csv ("../Preparing examples/KELVINGROVE15.envTemp.csv")
incRdataExample2$PRESENCE <- NULL
incRdataExample2$ENTRY <- NULL
incRdataExample2$LEAVING <- NULL
incRdataExample2$MISSED <- NULL
incRdataExample2$BOX <- NULL
incRdataExample2$obs <- NULL
incRdataExample2$valueH <- NULL
str(incRdataExample2)
# proccessed data
incRdataExample2 <- incRprep (data=incRdataExample2,
date.name= "DATE",
date.format= "%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
incRdataExample2 <- env.tem (data.env=env.data, incubation.data=incRdataExample2,
date.format= "%d/%m/%Y %H:%M", timezone= "GMT")
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=3,
sensitivity=0.15,
maxNightVar_accepted=2,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-07",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample$date
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-07",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
plot (incRincubationExample$index, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
_incRscan
?incRscan
source ("../Preparing examples/env.temp.r")
incRdataExample2 <- read.csv("../Preparing examples/G16iButton.0605.cameracali.csv")
plot (incRdataExample2$valueT)
env.data <- read.csv ("../Preparing examples/KELVINGROVE15.envTemp.csv")
incRdataExample2$PRESENCE <- NULL
incRdataExample2$ENTRY <- NULL
incRdataExample2$LEAVING <- NULL
incRdataExample2$MISSED <- NULL
incRdataExample2$BOX <- NULL
incRdataExample2$obs <- NULL
incRdataExample2$valueH <- NULL
str(incRdataExample2)
# proccessed data
incRdataExample2 <- incRprep (data=incRdataExample2,
date.name= "DATE",
date.format= "%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
incRdataExample2 <- env.tem (data.env=env.data, incubation.data=incRdataExample2,
date.format= "%d/%m/%Y %H:%M", timezone= "GMT")
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=3,
sensitivity=0.15,
temp.diff =3,
maxNightVar_accepted=1,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
plot (incRincubationExample$index, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=3,
sensitivity=0.15,
temp.diff =8,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
plot (incRincubationExample$index, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
plot (incRincubationExample$index, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-06",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-07",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-08",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-09",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-10",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=4,
sensitivity=0.15,
temp.diff =8,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-10",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.15,
temp.diff =8,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-10",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-7",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.15,
temp.diff =7,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-7",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.15,
temp.diff =6,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.15,
temp.diff =5,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.10,
temp.diff =5,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
sensitivity=0.05,
upper.time=5,
temp.diff =5,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
incubation.analysis <- incRscan (data=incRdataExample2,
lower.time=22,
upper.time=5,
sensitivity=0.15,
temp.diff =3,
maxNightVar_accepted=1.5,
env.temp="env.temp")
incRincubationExample <- incubation.analysis[[1]]
incRincubationExample <- incRincubationExample[incRincubationExample$date=="2015-05-6",]
plot (incRincubationExample$dec.time, incRincubationExample$valueT,
col=incRincubationExample$inc.vector+1, pch=19)
?"incRdataExample"
data(incRdataExample)
df <- incRdataExample
df.prep <- incRprep (data= df,
date.name="DATE",
date.format="%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
inc.example <- incRscan (data=df.prep,            # data frame
lower.time=22,           # beginning of calibrating window
upper.time=3,            # end of calibrating window
sensitivity=0.15,        # correction when nest Tª is
# far below maxinc.Temp
temp.diff=5,             # diff in Tª from maxinc.Temp that
# triggers sensitivity change
maxNightVar_accepted=2,  # max night variation accepted in
# calibrating windows
env.temp="env.temp")
df.incubation <- inc.example[[1]]
plot.example <- df.incubation
plot (valueT ~ dec.time, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
plot (valueT ~ index, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
inc.example <- incRscan (data=df.prep,            # data frame
lower.time=22,           # beginning of calibrating window
upper.time=3,            # end of calibrating window
# far below maxinc.Temp
sensitivity=0.15,        # correction when nest Tª is
temp.diff=8,             # diff in Tª from maxinc.Temp that
# triggers sensitivity change
maxNightVar_accepted=2,  # max night variation accepted in
# calibrating windows
env.temp="env.temp")     # column with environmental tempertures
df.incubation <- inc.example[[1]]
plot.example <- df.incubation
plot (valueT ~ index, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
plot (valueT ~ index, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
plot.example <- df.incubation[df.incubation$date=="2015-05-07",]
# plot
plot (valueT ~ index, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
plot.example <- df.incubation[df.incubation$date=="2015-05-08",]
# plot
plot (valueT ~ index, data=plot.example,
pch=19,
main=list("Blue tit incubation 07/05/2015"),
col=c("red", "black")[plot.example$inc.vector+1],# pch color defined by "inc.vector"
xaxt="n", las=1, cex.axis=1.5,# no x-axis, horizontal y axis-labels and size
xlab=list("Time", cex=1.5),
ylab=list("Temperature (ºC)", cex=1.5))
library(incR)
devtools::document()
devtools::install_github("PabloCapilla/incR")
library(incR)
library(incR)
data("incRdataExample")
dt99 <- incRdataExample
head(df99)
head(dt99)
library(incR)
devtools::document()
env.data <- read.csv ("../Preparing examples/KELVINGROVE15.envTemp.csv")
str(env.data)
incRdataExample <- read.csv("../Preparing examples/K22iButton.0805.cameracali.csv")
incRdataExample$PRESENCE <- NULL
incRdataExample$ENTERING <- NULL
incRdataExample$LEAVING <- NULL
incRdataExample$MISSED <- NULL
incRdataExample$valueH <- NULL
incRdataExample$BOX <- NULL
# proccessed data
incRdataExample <- incRprep (data=incRdataExample,
date.name= "DATE",
date.format= "%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
incRdataExample <- incRprep (data=incRdataExample,
date.name= "DATE",
date.format= "%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
?incRenv
?incR::incRenv
?incR::incRenv
?incRenv
library(incR)
?incRenv
str(env.data)
env.data$SITE <- NULL
env.data$TYPE <- NULL
str(env.data)
env.data <- read.csv ("../Preparing examples/KELVINGROVE15.envTemp.csv")
env.data$SITE <- NULL
env.data$TYPE <- NULL
env.data$valueH <- NULL
str(env.data)
incRdataExample<- incRenv (data.env=env.data,
data.nest=incRdataExample,
env.temperature.name = "valueT",
env.date.name = "DATE",
env.date.format = "%d/%m/%Y %H:%M",
env.timezone = "GMT")
headincRdataExample
head(incRdataExample)
devtools::use_data(incRdataExample, overwrite = TRUE, compress = "bzip2")
incRdataExample$env.temp
names(incRdataExample)
incRdataExample$index <-NULL
incRdataExample$time <-NULL
incRdataExample$hour <-NULL
incRdataExample$year <-NULL
incRdataExample$date <-NULL
incRdataExample$dec.time <-NULL
incRdataExample$temp1<-NULL
names(incRdataExample)
devtools::use_data(incRdataExample, overwrite = TRUE, compress = "bzip2")
devtools::use_data(incRenvironmentalData, overwrite = TRUE, compress = "bzip2")
incRenvironmentalData <- env.data
devtools::use_data(incRenvironmentalData, overwrite = TRUE, compress = "bzip2")
str(env.data)
?strptime
?do.call
library(incR)
library(incR)
devtools::document
devtools::document()
devtools::document()
devtools::document()
?merge
data(incRenvironmentalData)  # environmental data
data(incRincubationExample)
new.data <- incRprep (data=incRdataExample,
date.name= "DATE",
date.format= "%d/%m/%Y %H:%M",
timezone="GMT",
temperature.name="valueT")
data.nest = new.data
data.env = incRenvironmentalData
env.temperature.name = "valueT"
env.date.name = "DATE"
env.date.format = "%d/%m/%Y %H:%M"
env.timezone = "GMT"
data.env$t <- base::strptime(data.env[[env.date.name]],
format=env.date.format,
tz=env.timezone)
data.env$time <-  base::strftime (data.env$t, format= "%H:%M")
data.env$date <-  base::as.Date( base::format(data.env$t,"%Y-%m-%d"))
data.env$index <-  base::seq(1, to= base::nrow(data.env), by=1)
data.env$hour <-  base::as.numeric( base::format (data.env$t, "%H"))
# necessary list
time.temp.list <- list(NA)
for (d in 1: base::length( base::split(data.env, data.env$date))) {
df00 <-  base::split(data.env, data.env$date)[[d]]
temp <-  base::as.numeric( base::tapply(df00[[env.temperature.name]],
df00$hour,
base::mean,
rm.na=TRUE))
hour <-  base::as.numeric( base::unique(df00$hour))
date <-  base::rep( base::unique( base::as.Date( base::strptime(df00$DATE,
format=env.date.format,
tz=env.timezone),"%Y-%m-%d"),
length= base::length(hour)))
time.temp.list[[d]] <-  base::data.frame(date=date, hour=hour, temp=temp)
}
time.temp <-  base::do.call("rbind",time.temp.list)
time.temp
time.temp$dateTime <- paste (time.temp$date, time.temp$hour, sep = " ")
time.temp$dateTime
data.nest$dateTime <- paste (data.nest$date, data.nest$hour, sep = " ")
data.nest$dateTime
data.nest[["env.temp"]] <- NA
for (p in 1: base::length( base::split(data.nest, data.nest[["date"]]))){
df.nest <-  base::split(data.nest, data.nest[["date"]])[[p]]
df.env <- time.temp[time.temp$date== base::unique(df.nest$date),]
for (h in 1: base::length(data.nest[["hour"]])){
hour.match <- data.nest[["hour"]][h]
index <- data.nest$index[data.nest$date== base::unique(df.nest$date) &
data.nest$hour==hour.match]
data.nest$env.temp[data.nest$date== base::unique(df.nest$date) &
data.nest$hour==hour.match] <-
base::rep(df.env$temp[df.env$hour==hour.match], length= base::length(index))
}
}
a <- data.nest$env.temp
merge (data.nest,  time.temp, by= intersect(data.nest$dateTime))
merge (data.nest,  time.temp, by= intersect("dateTime", "dateTime"))
b <- merge (data.nest,  time.temp, by= intersect("dateTime", "dateTime"))
head(b)
merge (data.nest,  time.temp, by= intersect("dateTime", "dateTime"))$temp
data.nest$env.temp2 <- merge (data.nest,  time.temp, by= intersect("dateTime", "dateTime"))$temp
plot (data.nest$env.temp, data.nest$env.temp2)
merge (data.nest,  time.temp,
by= intersect("dateTime", "dateTime"))
head(merge (data.nest,  time.temp,
by= intersect("dateTime", "dateTime")))
b <- merge (data.nest,  time.temp,
by= intersect("dateTime", "dateTime"))
plot (b$env.temp, b$temp)
time.temp$dateTime00 <- paste (time.temp$date, time.temp$hour, sep = " ")
time.temp$dateTime00 <- paste (time.temp$date, time.temp$hour, sep = " ")
data.nest[["env.temp"]] <- NA
data.nest$dateTime <- paste (data.nest$date, data.nest$hour, sep = " ")
b <- merge (data.nest,  time.temp,
by= intersect("dateTime", "dateTime00"))
plot (b$env.temp, b$temp)
for (p in 1: base::length( base::split(data.nest, data.nest[["date"]]))){
df.nest <-  base::split(data.nest, data.nest[["date"]])[[p]]
df.env <- time.temp[time.temp$date== base::unique(df.nest$date),]
for (h in 1: base::length(data.nest[["hour"]])){
hour.match <- data.nest[["hour"]][h]
index <- data.nest$index[data.nest$date== base::unique(df.nest$date) &
data.nest$hour==hour.match]
data.nest$env.temp[data.nest$date== base::unique(df.nest$date) &
data.nest$hour==hour.match] <-
base::rep(df.env$temp[df.env$hour==hour.match], length= base::length(index))
}
}
b <- merge (data.nest,  time.temp,
by= intersect("dateTime", "dateTime00"))
plot (b$env.temp, b$temp)
library(incR)
devtools::document()
?incRenv
?incRenv
library(incR)
?incRenv
library(incR)
devtools::document()
